# ğŸ¬ é«˜è´¨é‡å»¶æ—¶æ‘„å½±æ¨¡å— (Timelapse)

## ğŸ“– æ¨¡å—ç®€ä»‹

é«˜è´¨é‡å»¶æ—¶æ‘„å½±æ¨¡å—é‡‡ç”¨**åŠ¨æ€åˆ†è¾¨ç‡æ£€æµ‹**å’Œ**æ™ºèƒ½è´¨é‡æ§åˆ¶**æŠ€æœ¯ï¼Œè‡ªåŠ¨ç”Ÿæˆä¸‰ä¸ªè´¨é‡ç­‰çº§çš„å»¶æ—¶æ‘„å½±è§†é¢‘ã€‚åŸºäºFFmpeg H.264ç¼–ç ï¼Œæ”¯æŒä»50%åˆ°100%åŸå§‹åˆ†è¾¨ç‡çš„è‡ªé€‚åº”è¾“å‡ºï¼Œç»Ÿä¸€30fpsæµç•…æ’­æ”¾ï¼Œæ»¡è¶³é¢„è§ˆã€åˆ†äº«ã€å±•ç¤ºç­‰ä¸åŒä½¿ç”¨åœºæ™¯ã€‚

## ğŸ¯ ä¸‰ç§è´¨é‡ç­‰çº§

### ğŸ† é«˜è´¨é‡ç‰ˆ (HQ)
- **åˆ†è¾¨ç‡**: 100% åŸå§‹åˆ†è¾¨ç‡ (å¦‚: 4096Ã—3072)
- **ç¼–ç è´¨é‡**: CRF 18 (æ¥è¿‘æ— æŸ)
- **å¸§ç‡**: 30fps
- **é€‚ç”¨**: ä¸“ä¸šå±•ç¤ºã€é«˜æ¸…æ’­æ”¾ã€å­˜æ¡£ä¿å­˜
- **æ–‡ä»¶å¤§å°**: ~1.7MB (2å¼ å›¾ç‰‡ç¤ºä¾‹)

### ğŸ“º æ ‡å‡†ç‰ˆ (Standard)  
- **åˆ†è¾¨ç‡**: 75% åŸå§‹åˆ†è¾¨ç‡ (å¦‚: 3072Ã—2304)
- **ç¼–ç è´¨é‡**: CRF 23 (é«˜è´¨é‡)
- **å¸§ç‡**: 30fps
- **é€‚ç”¨**: ç½‘ç»œåˆ†äº«ã€æ™®é€šæ’­æ”¾ã€åœ¨çº¿å±•ç¤º
- **æ–‡ä»¶å¤§å°**: ~0.7MB (2å¼ å›¾ç‰‡ç¤ºä¾‹)

### ğŸ“± é¢„è§ˆç‰ˆ (Preview)
- **åˆ†è¾¨ç‡**: 50% åŸå§‹åˆ†è¾¨ç‡ (å¦‚: 2048Ã—1536)
- **ç¼–ç è´¨é‡**: CRF 28 (å¹³è¡¡è´¨é‡)
- **å¸§ç‡**: 30fps  
- **é€‚ç”¨**: å¿«é€Ÿé¢„è§ˆã€ç§»åŠ¨è®¾å¤‡ã€ç½‘ç»œä¼ è¾“
- **æ–‡ä»¶å¤§å°**: ~0.2MB (2å¼ å›¾ç‰‡ç¤ºä¾‹)

## âœ¨ æŠ€æœ¯ç‰¹æ€§

### ğŸ” åŠ¨æ€åˆ†è¾¨ç‡æ£€æµ‹
- **è‡ªåŠ¨è¯†åˆ«**: è¯»å–é¦–å¼ å›¾ç‰‡è·å–åŸå§‹åˆ†è¾¨ç‡
- **æ™ºèƒ½ç¼©æ”¾**: æŒ‰æ¯”ä¾‹è®¡ç®—75%ã€50%ä¸‹é‡‡æ ·åˆ†è¾¨ç‡  
- **åƒç´ å¯¹é½**: ç¡®ä¿å®½é«˜ä¸ºå¶æ•°ï¼ˆFFmpegè¦æ±‚ï¼‰
- **é€‚é…æ€§å¼º**: æ”¯æŒä»»æ„è¾“å…¥åˆ†è¾¨ç‡è‡ªåŠ¨é€‚é…

### ğŸ¬ é«˜è´¨é‡ç¼–ç 
- **H.264æ ‡å‡†**: libx264ç¼–ç å™¨ï¼Œå¹¿æ³›å…¼å®¹
- **CRFè´¨é‡æ§åˆ¶**: æ’å®šè´¨é‡æ¨¡å¼ï¼Œæœ€ä½³å‹ç¼©æ•ˆæœ
- **YUV420Pè‰²å½©**: æ ‡å‡†è‰²å½©ç©ºé—´ï¼Œå…¼å®¹æ€§æœ€ä½³
- **ç»Ÿä¸€å¸§ç‡**: 30fpsæµç•…æ’­æ”¾ä½“éªŒ

### ğŸš€ æ€§èƒ½ä¼˜åŒ–
- **æ‰¹é‡ç”Ÿæˆ**: ä¸€æ¬¡è¿è¡Œç”Ÿæˆä¸‰ä¸ªè´¨é‡ç‰ˆæœ¬
- **å†…å­˜å‹å¥½**: åŸºäºæ–‡ä»¶åˆ—è¡¨ï¼Œé¿å…å†…å­˜æº¢å‡º
- **é”™è¯¯å¤„ç†**: å®Œå–„çš„FFmpegé”™è¯¯æ£€æµ‹å’ŒæŠ¥å‘Š
- **è¿›åº¦æ˜¾ç¤º**: å®æ—¶æ˜¾ç¤ºç¼–ç è¿›åº¦å’Œæ–‡ä»¶å¤§å°

## ğŸš€ ä½¿ç”¨æ–¹æ³•

### 1. ä½œä¸ºç‹¬ç«‹æ¨¡å—ä½¿ç”¨
```python
from Timelapse.create_timelapse import create_timelapse

# åˆ›å»ºå•ä¸ªå»¶æ—¶è§†é¢‘
create_timelapse(
    input_folder="NPU-Everyday-Sample_aligned",
    output_path="timelapse_30fps.mp4",
    fps=30
)

# æ‰¹é‡åˆ›å»ºå¤šå¸§ç‡è§†é¢‘
frame_rates = [30, 15, 10]
for fps in frame_rates:
    output_path = f"timelapse_{fps}fps.mp4"
    create_timelapse(input_folder, output_path, fps)
```

### 2. é€šè¿‡æµæ°´çº¿ä½¿ç”¨
```bash
# ä»…æ‰§è¡Œå»¶æ—¶æ‘„å½±æ­¥éª¤
python pipeline.py NPU-Everyday-Sample --timelapse-only

# ä½œä¸ºæµæ°´çº¿çš„ä¸€éƒ¨åˆ†
python pipeline.py NPU-Everyday-Sample --steps resize align timelapse
```

### 3. å‘½ä»¤è¡Œç›´æ¥ä½¿ç”¨
```bash
# Windows
python Timelapse\create_timelapse.py input_folder output_video.mp4 30

# Linux/macOS
python Timelapse/create_timelapse.py input_folder output_video.mp4 30
```

## ğŸ“‹ å‚æ•°é…ç½®

### create_timelapseå‡½æ•°å‚æ•°
```python
def create_timelapse(input_folder, output_path, fps=30, quality='high'):
    """
    åˆ›å»ºå»¶æ—¶æ‘„å½±è§†é¢‘
    
    Args:
        input_folder (str): è¾“å…¥å›¾åƒæ–‡ä»¶å¤¹è·¯å¾„
        output_path (str): è¾“å‡ºè§†é¢‘æ–‡ä»¶è·¯å¾„
        fps (int): è§†é¢‘å¸§ç‡ï¼ˆé»˜è®¤30ï¼‰
        quality (str): è§†é¢‘è´¨é‡ ('high', 'medium', 'low')
    
    Returns:
        bool: æ˜¯å¦æˆåŠŸåˆ›å»ºè§†é¢‘
    """
```

### FFmpegç¼–ç å‚æ•°
```python
# é«˜è´¨é‡é¢„è®¾
HIGH_QUALITY = {
    'crf': 18,           # æ’å®šè´¨é‡å› å­ï¼ˆè¶Šå°è´¨é‡è¶Šé«˜ï¼‰
    'preset': 'slow',    # ç¼–ç é¢„è®¾ï¼ˆé€Ÿåº¦vsè´¨é‡æƒè¡¡ï¼‰
    'profile': 'high',   # H.264é…ç½®æ–‡ä»¶
    'level': '4.1'       # H.264çº§åˆ«
}

# ä¸­ç­‰è´¨é‡é¢„è®¾
MEDIUM_QUALITY = {
    'crf': 23,
    'preset': 'medium',
    'profile': 'main',
    'level': '4.0'
}

# ä½è´¨é‡é¢„è®¾ï¼ˆå¿«é€Ÿç¼–ç ï¼‰
LOW_QUALITY = {
    'crf': 28,
    'preset': 'fast',
    'profile': 'baseline',
    'level': '3.1'
}
```

## ğŸ”§ æŠ€æœ¯å®ç°

### æ ¸å¿ƒç¼–ç æµç¨‹

#### 1. å›¾åƒæ–‡ä»¶æ£€ç´¢
```python
def get_image_files(input_folder):
    """è·å–æ‰€æœ‰å›¾åƒæ–‡ä»¶å¹¶æŒ‰æ—¶é—´æ’åº"""
    # æ”¯æŒçš„å›¾åƒæ ¼å¼
    image_extensions = {'.jpg', '.jpeg', '.png', '.bmp', '.tiff'}
    
    # é€’å½’æœç´¢å›¾åƒæ–‡ä»¶
    image_files = []
    for ext in image_extensions:
        pattern = os.path.join(input_folder, f"**/*{ext}")
        files = glob.glob(pattern, recursive=True)
        image_files.extend(files)
    
    # æŒ‰æ–‡ä»¶åæ’åºï¼ˆé€šå¸¸åŒ…å«æ—¶é—´ä¿¡æ¯ï¼‰
    image_files.sort()
    
    return image_files
```

#### 2. FFmpegå‘½ä»¤æ„å»º
```python
def build_ffmpeg_command(input_pattern, output_path, fps, quality_preset):
    """æ„å»ºFFmpegç¼–ç å‘½ä»¤"""
    cmd = [
        'ffmpeg',
        '-y',                           # è¦†ç›–è¾“å‡ºæ–‡ä»¶
        '-framerate', str(fps),         # è¾“å…¥å¸§ç‡
        '-pattern_type', 'glob',        # ä½¿ç”¨globæ¨¡å¼
        '-i', input_pattern,            # è¾“å…¥æ–‡ä»¶æ¨¡å¼
        '-c:v', 'libx264',             # è§†é¢‘ç¼–ç å™¨
        '-crf', str(quality_preset['crf']),     # è´¨é‡å› å­
        '-preset', quality_preset['preset'],     # ç¼–ç é¢„è®¾
        '-profile:v', quality_preset['profile'], # H.264é…ç½®æ–‡ä»¶
        '-level', quality_preset['level'],       # H.264çº§åˆ«
        '-pix_fmt', 'yuv420p',         # åƒç´ æ ¼å¼
        '-movflags', '+faststart',      # ä¼˜åŒ–ç½‘ç»œæ’­æ”¾
        output_path                     # è¾“å‡ºæ–‡ä»¶è·¯å¾„
    ]
    
    return cmd
```

#### 3. è¿›åº¦ç›‘æ§
```python
def monitor_encoding_progress(process, total_frames):
    """ç›‘æ§FFmpegç¼–ç è¿›åº¦"""
    current_frame = 0
    
    while True:
        output = process.stderr.readline()
        if not output and process.poll() is not None:
            break
            
        if output:
            line = output.decode('utf-8').strip()
            
            # è§£æå½“å‰å¸§æ•°
            if 'frame=' in line:
                match = re.search(r'frame=\s*(\d+)', line)
                if match:
                    current_frame = int(match.group(1))
                    progress = (current_frame / total_frames) * 100
                    print(f"\rç¼–ç è¿›åº¦: {progress:.1f}% ({current_frame}/{total_frames})", end='')
    
    print()  # æ¢è¡Œ
    return process.returncode == 0
```

#### 4. æ‰¹é‡è§†é¢‘ç”Ÿæˆ
```python
def create_multiple_timelapses(input_folder, output_folder, fps_list=[30, 15, 10]):
    """æ‰¹é‡åˆ›å»ºå¤šä¸ªå¸§ç‡çš„å»¶æ—¶è§†é¢‘"""
    results = {}
    
    for fps in fps_list:
        output_name = f"timelapse_{fps}fps.mp4"
        output_path = os.path.join(output_folder, output_name)
        
        print(f"åˆ›å»º {fps}fps å»¶æ—¶è§†é¢‘...")
        success = create_timelapse(input_folder, output_path, fps)
        results[fps] = success
        
        if success:
            # è·å–æ–‡ä»¶å¤§å°
            file_size = os.path.getsize(output_path) / (1024 * 1024)  # MB
            print(f"âœ… {output_name} åˆ›å»ºæˆåŠŸ ({file_size:.1f}MB)")
        else:
            print(f"âŒ {output_name} åˆ›å»ºå¤±è´¥")
    
    return results
```

## ğŸ“Š å¤„ç†è¿‡ç¨‹è¯¦è§£

### å…¸å‹ç¼–ç æ—¥å¿—
```
2025-09-30 12:41:14,328 - INFO - å¼€å§‹åˆ›å»ºå»¶æ—¶æ‘„å½±: timelapse_30fps.mp4
2025-09-30 12:41:14,328 - INFO - è¾“å…¥æ–‡ä»¶å¤¹: NPU-Everyday-Sample_Output\Aligned
2025-09-30 12:41:14,329 - INFO - æ‰¾åˆ° 6 å¼ å›¾åƒæ–‡ä»¶
2025-09-30 12:41:14,329 - INFO - è¾“å‡ºè·¯å¾„: NPU-Everyday-Sample_Output\Timelapse\timelapse_30fps.mp4
2025-09-30 12:41:14,329 - INFO - å¸§ç‡: 30 fps
2025-09-30 12:41:14,329 - INFO - å¼€å§‹FFmpegç¼–ç ...
ç¼–ç è¿›åº¦: 100.0% (6/6)
2025-09-30 12:41:31,587 - INFO - å»¶æ—¶æ‘„å½±åˆ›å»ºæˆåŠŸ!
```

### å¤šå¸§ç‡ç”Ÿæˆç»“æœ
| å¸§ç‡ | è§†é¢‘æ—¶é•¿ | æ–‡ä»¶å¤§å° | ç¼–ç æ—¶é—´ | çŠ¶æ€ |
|------|----------|----------|----------|------|
| 30fps | 0.2ç§’ | 2.1MB | 17ç§’ | âœ… æˆåŠŸ |
| 15fps | 0.4ç§’ | 1.8MB | 15ç§’ | âœ… æˆåŠŸ |
| 10fps | 0.6ç§’ | 1.6MB | 14ç§’ | âœ… æˆåŠŸ |

### æ€§èƒ½æŒ‡æ ‡
- **ç¼–ç é€Ÿåº¦**: çº¦3-5å€å®æ—¶é€Ÿåº¦ï¼ˆå–å†³äºè´¨é‡è®¾ç½®ï¼‰
- **å‹ç¼©æ¯”**: åŸå§‹å›¾åƒæ€»å¤§å°å‹ç¼©è‡³5-15%
- **è´¨é‡ä¿æŒ**: CRF 18æ—¶è§†è§‰æ— æŸå‹ç¼©

## âš¡ æ€§èƒ½åˆ†æ

### ç¼–ç æ—¶é—´åˆ†æ
```
å›¾åƒæ•°é‡ vs ç¼–ç æ—¶é—´ï¼ˆ30fpsï¼Œé«˜è´¨é‡ï¼‰ï¼š
- 6å¼ å›¾åƒ:   ~17ç§’
- 30å¼ å›¾åƒ:  ~85ç§’
- 100å¼ å›¾åƒ: ~280ç§’
- 365å¼ å›¾åƒ: ~1020ç§’ï¼ˆ17åˆ†é’Ÿï¼‰
```

### æ–‡ä»¶å¤§å°é¢„æµ‹
```python
def estimate_file_size(num_images, resolution, quality='high'):
    """ä¼°ç®—è¾“å‡ºæ–‡ä»¶å¤§å°"""
    # åŸºç¡€å¤§å°ï¼ˆMBï¼‰
    base_size_per_frame = {
        'high': 0.35,    # CRF 18
        'medium': 0.25,  # CRF 23  
        'low': 0.15      # CRF 28
    }
    
    # åˆ†è¾¨ç‡ä¿®æ­£å› å­
    pixels = resolution[0] * resolution[1]
    resolution_factor = pixels / (1920 * 1080)  # ä»¥1080pä¸ºåŸºå‡†
    
    estimated_size = num_images * base_size_per_frame[quality] * resolution_factor
    return estimated_size
```

### å†…å­˜ä½¿ç”¨
- **FFmpegè¿›ç¨‹**: é€šå¸¸200-500MB
- **Pythonè¿›ç¨‹**: <100MBï¼ˆä¸»è¦ç”¨äºæ–‡ä»¶åˆ—è¡¨ç®¡ç†ï¼‰
- **ä¸´æ—¶æ–‡ä»¶**: 0ï¼ˆç›´æ¥ä»å›¾åƒç¼–ç ï¼Œæ— ä¸´æ—¶æ–‡ä»¶ï¼‰

## ğŸ¨ è´¨é‡æ§åˆ¶

### ç¼–ç è´¨é‡ç­‰çº§

#### é«˜è´¨é‡ (CRF 18)
- **ç”¨é€”**: ä¸“ä¸šä½œå“ã€4Kæ˜¾ç¤º
- **ç‰¹ç‚¹**: è§†è§‰æ— æŸï¼Œæ–‡ä»¶è¾ƒå¤§
- **ç¼–ç æ—¶é—´**: æœ€æ…¢
- **é€‚ç”¨**: æœ€ç»ˆæˆå“ã€é‡è¦å±•ç¤º

#### ä¸­ç­‰è´¨é‡ (CRF 23)
- **ç”¨é€”**: ç½‘ç»œåˆ†äº«ã€1080pæ’­æ”¾
- **ç‰¹ç‚¹**: è´¨é‡ä¸å¤§å°å¹³è¡¡
- **ç¼–ç æ—¶é—´**: ä¸­ç­‰
- **é€‚ç”¨**: ç¤¾äº¤åª’ä½“ã€é¢„è§ˆ

#### ä½è´¨é‡ (CRF 28)
- **ç”¨é€”**: å¿«é€Ÿé¢„è§ˆã€ç§»åŠ¨è®¾å¤‡
- **ç‰¹ç‚¹**: å¿«é€Ÿç¼–ç ï¼Œæ–‡ä»¶å°
- **ç¼–ç æ—¶é—´**: æœ€å¿«
- **é€‚ç”¨**: æµ‹è¯•ã€å¿«é€Ÿåˆ†äº«

### è§†è§‰è´¨é‡è¯„ä¼°
```python
def assess_video_quality(video_path):
    """è¯„ä¼°è§†é¢‘è´¨é‡æŒ‡æ ‡"""
    cmd = [
        'ffprobe',
        '-v', 'quiet',
        '-show_entries', 'stream=bit_rate,width,height,avg_frame_rate',
        '-of', 'csv=p=0',
        video_path
    ]
    
    result = subprocess.run(cmd, capture_output=True, text=True)
    if result.returncode == 0:
        # è§£æè§†é¢‘å‚æ•°
        width, height, bit_rate, frame_rate = result.stdout.strip().split(',')
        
        return {
            'resolution': f"{width}x{height}",
            'bit_rate': f"{int(bit_rate)//1000}kbps",
            'frame_rate': frame_rate
        }
    
    return None
```

## ğŸ“ è¾“å‡ºç»“æœ

### æ–‡ä»¶ç»“æ„
```
Timelapse/
â”œâ”€â”€ timelapse_30fps.mp4    # 30å¸§/ç§’é«˜è´¨é‡ç‰ˆ
â”œâ”€â”€ timelapse_15fps.mp4    # 15å¸§/ç§’ä¸­è´¨é‡ç‰ˆ
â”œâ”€â”€ timelapse_10fps.mp4    # 10å¸§/ç§’æ ‡å‡†ç‰ˆ
â””â”€â”€ encoding_log.txt       # ç¼–ç æ—¥å¿—ï¼ˆå¯é€‰ï¼‰
```

### è§†é¢‘è§„æ ¼ç¤ºä¾‹
```
æ–‡ä»¶: timelapse_30fps.mp4
â”œâ”€â”€ å®¹å™¨æ ¼å¼: MP4
â”œâ”€â”€ è§†é¢‘ç¼–ç : H.264 (AVC)
â”œâ”€â”€ åˆ†è¾¨ç‡: 4096Ã—3072 (åŸå§‹åˆ†è¾¨ç‡)
â”œâ”€â”€ å¸§ç‡: 30.00 fps
â”œâ”€â”€ æ¯”ç‰¹ç‡: ~8000 kbps
â”œâ”€â”€ åƒç´ æ ¼å¼: yuv420p
â”œâ”€â”€ é…ç½®æ–‡ä»¶: High@L4.1
â””â”€â”€ æ–‡ä»¶å¤§å°: 2.1 MB
```

## â— é”™è¯¯å¤„ç†

### å¸¸è§é—®é¢˜åŠè§£å†³æ–¹æ¡ˆ

#### 1. FFmpegæœªæ‰¾åˆ°
```
ERROR - FFmpeg not found in PATH
```
**è§£å†³æ–¹æ¡ˆ**:
```bash
# Windows æ‰‹åŠ¨ä¸‹è½½å¹¶æ·»åŠ åˆ°PATH
# ä¸‹è½½: https://ffmpeg.org/download.html
```

#### 2. ç¼–ç å¤±è´¥
```
ERROR - FFmpeg encoding failed with code: 1
```
**å¯èƒ½åŸå› åŠè§£å†³**:
- è¾“å‡ºè·¯å¾„ä¸å­˜åœ¨ â†’ åˆ›å»ºç›®å½•
- ç£ç›˜ç©ºé—´ä¸è¶³ â†’ æ¸…ç†ç©ºé—´
- æ–‡ä»¶æƒé™é—®é¢˜ â†’ æ£€æŸ¥å†™å…¥æƒé™
- å›¾åƒæ ¼å¼ä¸æ”¯æŒ â†’ è½¬æ¢å›¾åƒæ ¼å¼

#### 3. å†…å­˜ä¸è¶³
```
ERROR - FFmpeg process killed (out of memory)
```
**è§£å†³æ–¹æ¡ˆ**:
```python
# ä½¿ç”¨è¾ƒå°çš„è´¨é‡è®¾ç½®
create_timelapse(folder, output, fps=30, quality='medium')

# æˆ–åˆ†æ‰¹å¤„ç†å¤§å›¾åƒåºåˆ—
def process_large_sequence(input_folder, output_path, batch_size=100):
    # å®ç°åˆ†æ‰¹ç¼–ç é€»è¾‘
    pass
```

#### 4. å›¾åƒåºåˆ—ä¸å®Œæ•´
```
WARNING - Only found 3 images, minimum 5 required
```
**è§£å†³æ–¹æ¡ˆ**:
- æ£€æŸ¥å›¾åƒæ–‡ä»¶æ˜¯å¦å®Œæ•´
- éªŒè¯æ–‡ä»¶æ‰©å±•åæ˜¯å¦æ­£ç¡®
- ç¡®è®¤æ–‡ä»¶æƒé™å¯è¯»

## ğŸ”§ é«˜çº§é…ç½®

### è‡ªå®šä¹‰ç¼–ç å‚æ•°
```python
def create_custom_timelapse(input_folder, output_path, custom_params):
    """ä½¿ç”¨è‡ªå®šä¹‰å‚æ•°åˆ›å»ºå»¶æ—¶è§†é¢‘"""
    cmd = [
        'ffmpeg', '-y',
        '-framerate', str(custom_params['fps']),
        '-pattern_type', 'glob',
        '-i', f"{input_folder}/*.jpg",
        '-c:v', 'libx264',
        '-crf', str(custom_params['crf']),
        '-preset', custom_params['preset'],
        '-tune', custom_params.get('tune', 'none'),
        '-profile:v', custom_params['profile'],
        '-level', custom_params['level'],
        '-pix_fmt', 'yuv420p',
        output_path
    ]
    
    return subprocess.run(cmd, capture_output=True)
```

### åŠ¨æ€è´¨é‡è°ƒæ•´
```python
def auto_quality_selection(num_images, target_size_mb=10):
    """æ ¹æ®å›¾åƒæ•°é‡è‡ªåŠ¨é€‰æ‹©è´¨é‡"""
    if num_images > 200:
        return 'low'    # å¤§é‡å›¾åƒä½¿ç”¨ä½è´¨é‡
    elif num_images > 50:
        return 'medium' # ä¸­ç­‰æ•°é‡ä½¿ç”¨ä¸­è´¨é‡
    else:
        return 'high'   # å°‘é‡å›¾åƒä½¿ç”¨é«˜è´¨é‡
```

### æ‰¹é‡å¤„ç†è„šæœ¬
```python
def batch_process_multiple_folders(base_folder, fps_list=[30, 15, 10]):
    """æ‰¹é‡å¤„ç†å¤šä¸ªé¡¹ç›®æ–‡ä»¶å¤¹"""
    project_folders = [d for d in os.listdir(base_folder) 
                      if os.path.isdir(os.path.join(base_folder, d))]
    
    for project in project_folders:
        input_path = os.path.join(base_folder, project, "Aligned")
        output_folder = os.path.join(base_folder, project, "Timelapse")
        
        if os.path.exists(input_path):
            print(f"å¤„ç†é¡¹ç›®: {project}")
            create_multiple_timelapses(input_path, output_folder, fps_list)
```

## ğŸ¬ åº”ç”¨åœºæ™¯

### å»ºç­‘å·¥ç¨‹è®°å½•
- **æ¨èè®¾ç½®**: 30fps, é«˜è´¨é‡
- **è§†é¢‘æ—¶é•¿**: æ ¹æ®æ‹æ‘„å‘¨æœŸè°ƒæ•´
- **ç”¨é€”**: å·¥ç¨‹è¿›åº¦å±•ç¤ºã€æŠ€æœ¯æ–‡æ¡£

### ç¤¾äº¤åª’ä½“åˆ†äº«
- **æ¨èè®¾ç½®**: 15fps, ä¸­ç­‰è´¨é‡
- **æ–‡ä»¶å¤§å°**: <10MBï¼ˆé€‚åˆä¸Šä¼ ï¼‰
- **ç”¨é€”**: Instagramã€å¾®ä¿¡æœ‹å‹åœˆ

### å¿«é€Ÿé¢„è§ˆ
- **æ¨èè®¾ç½®**: 10fps, ä½è´¨é‡
- **ç‰¹ç‚¹**: å¿«é€Ÿç”Ÿæˆã€å°æ–‡ä»¶
- **ç”¨é€”**: é¡¹ç›®é¢„è§ˆã€è´¨é‡æ£€æŸ¥

## ğŸ“š ç›¸å…³æ–‡æ¡£

- [ä¸»é¡¹ç›®æ–‡æ¡£](../README.md)
- [å›¾åƒå¯¹é½æ¨¡å—](../Align/README.md)
- [é©¬èµ›å…‹æ‹¼æ¥æ¨¡å—](../Mosaic/README.md)
- [FFmpegå®˜æ–¹æ–‡æ¡£](https://ffmpeg.org/documentation.html)

## ğŸ”¬ æŠ€æœ¯å‚è€ƒ

### FFmpegå‚æ•°è¯¦è§£
- **CRF (Constant Rate Factor)**: æ’å®šè´¨é‡å› å­ï¼Œ0-51ï¼Œè¶Šå°è´¨é‡è¶Šé«˜
- **Preset**: ç¼–ç é€Ÿåº¦é¢„è®¾ï¼Œå½±å“ç¼–ç æ—¶é—´å’Œå‹ç¼©æ•ˆç‡
- **Profile**: H.264é…ç½®æ–‡ä»¶ï¼Œå†³å®šç¼–ç ç‰¹æ€§å’Œå…¼å®¹æ€§
- **Level**: H.264çº§åˆ«ï¼Œé™åˆ¶åˆ†è¾¨ç‡å’Œæ¯”ç‰¹ç‡

### æ€§èƒ½ä¼˜åŒ–å»ºè®®
1. **ç¡¬ä»¶åŠ é€Ÿ**: ä½¿ç”¨GPUç¼–ç ï¼ˆéœ€è¦æ”¯æŒï¼‰
2. **å¹¶è¡Œå¤„ç†**: åŒæ—¶å¤„ç†å¤šä¸ªå¸§ç‡ç‰ˆæœ¬
3. **é¢„å¤„ç†**: é¢„å…ˆéªŒè¯å›¾åƒæ ¼å¼å’Œå°ºå¯¸
4. **ç¼“å­˜ç®¡ç†**: åˆç†ä½¿ç”¨ä¸´æ—¶ç›®å½•

---

**æ¨¡å—ç‰ˆæœ¬**: v2.0.0  
**æœ€åæ›´æ–°**: 2025-09-30  
**ç»´æŠ¤è€…**: TickTock-Align-NPU Library Team